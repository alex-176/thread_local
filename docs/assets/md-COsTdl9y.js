import{_ as p}from"./slidev/VSwitch-CCL8VPp7.js";import{_ as g,I as o}from"./slidev/two-cols-header-C_S6xLp2.js";import{b as y,o as c,w as l,g as i,B as s,e as t,m as k,v as C,x as u,C as n}from"./modules/vue-CN_MgJgD.js";import{u as E,f as A}from"./slidev/context-CVmnFa33.js";import"./modules/shiki-CbJNJzfY.js";import"./index-CdRH_Vka.js";import"./modules/unplugin-icons-CK6QWdxd.js";const x={__name:"thread_local.md__slidev_12",setup(F){const{$clicksContext:e,$frontmatter:r}=E();return e.setup(),(m,a)=>{const h=g,d=p;return c(),y(o,C(u(n(A)(n(r),11))),{left:l(D=>[t(h,k({},{ranges:[]}),{default:l(()=>a[0]||(a[0]=[i("pre",{class:"shiki shiki-themes dark-plus light-plus slidev-code",style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000","--shiki-dark-bg":"#1E1E1E","--shiki-light-bg":"#FFFFFF"}},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"#include"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}}," <thread>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"#include"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}}," <iostream>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"#include"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}}," <unistd.h>")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"struct"),i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}}," ThreadLogger"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"    ThreadLogger"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"()  { "),i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::cout << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"CTOR tid: "'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," << "),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"gettid"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"() << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D7BA7D","--shiki-light":"#EE0000"}},"\\n"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"; }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"    ~ThreadLogger"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"() { "),i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::cout << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"DTOR tid: "'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," << "),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"gettid"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"() << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D7BA7D","--shiki-light":"#EE0000"}},"\\n"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"; }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"};")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"thread_local"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," ThreadLogger threadLogger;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"thread_local"),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}}," int"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," v = "),i("span",{style:{"--shiki-dark":"#B5CEA8","--shiki-light":"#098658"}},"0"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},";"),i("span",{style:{"--shiki-dark":"#6A9955","--shiki-light":"#008000"}}," // added another variable")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"int"),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}}," main"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"(){")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"    ("),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"void"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},")v;"),i("span",{style:{"--shiki-dark":"#6A9955","--shiki-light":"#008000"}}," // access v")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"    std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::thread "),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"t"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"([](){")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"        ("),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"void"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},")v;"),i("span",{style:{"--shiki-dark":"#6A9955","--shiki-light":"#008000"}}," // access v")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"        std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::cout << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"thread'),i("span",{style:{"--shiki-dark":"#D7BA7D","--shiki-light":"#EE0000"}},"\\n"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"    });")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#9CDCFE","--shiki-light":"#001080"}},"    t"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"."),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"join"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"();")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"    std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::cout << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"main'),i("span",{style:{"--shiki-dark":"#D7BA7D","--shiki-light":"#EE0000"}},"\\n"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"    return"),i("span",{style:{"--shiki-dark":"#B5CEA8","--shiki-light":"#098658"}}," 0"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"}")])])],-1)])),_:1},16)]),right:l(D=>[t(d,null,{0:l(()=>a[1]||(a[1]=[i("p",null,[s("We added a "),i("code",null,"thread_local"),s(" variable and read it in all the treads.")],-1),i("p",null,"Will it work now?",-1)])),1:l(()=>[t(h,k({},{ranges:[]}),{default:l(()=>a[2]||(a[2]=[i("pre",{class:"shiki shiki-themes dark-plus light-plus slidev-code",style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000","--shiki-dark-bg":"#1E1E1E","--shiki-light-bg":"#FFFFFF"}},[i("code",{class:"language-console"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"thread")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"main")])])],-1)])),_:1},16),a[3]||(a[3]=i("p",null,[s("Still does not work!"),i("br"),i("br"),i("code",null,"v"),s(" has static initialization (with a constant value)."),i("br"),s("it means "),i("code",null,"v"),s(" is initialized in the beginning of the thread."),i("br"),i("code",null,"tls_guard"),s(" is not used for "),i("code",null,"v"),s(".")],-1))]),_:1})]),default:l(()=>[a[4]||(a[4]=i("h1",null,"Class lifetime : Construction",-1)),a[5]||(a[5]=i("h4",null,[s("In reality many threads access "),i("code",null,"thread_local"),s(" variables and "),i("code",null,"ThreadLogger"),s(" will work.")],-1))]),_:1},16)}}};export{x as default};
