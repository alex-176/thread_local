import{_ as p,I as g}from"./slidev/two-cols-header-C8QyY4gE.js";import{b as o,o as y,w as t,g as i,B as s,e,m as k,v as A,x as B,C as h}from"./modules/vue-CN_MgJgD.js";import{u as c,f as D}from"./slidev/context-B3MqoQzI.js";import"./modules/unplugin-icons-DEQuOA20.js";import"./index-CxvIfU2J.js";import"./modules/shiki-CbJNJzfY.js";const x={__name:"thread_local.md__slidev_18",setup(f){const{$clicksContext:r,$frontmatter:n}=c();return r.setup(),(u,a)=>{const l=p;return y(),o(g,A(B(h(D)(h(n),17))),{left:t(d=>[e(l,k({},{ranges:[]}),{default:t(()=>a[0]||(a[0]=[i("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"__attribute(("),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}},"tls_model"),i("span",{style:{"--shiki-dark":"#B8A965","--shiki-light":"#998418"}},"("),i("span",{style:{"--shiki-dark":"#C98A7D77","--shiki-light":"#B5695977"}},'"'),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},"initial-exec"),i("span",{style:{"--shiki-dark":"#C98A7D77","--shiki-light":"#B5695977"}},'"'),i("span",{style:{"--shiki-dark":"#B8A965","--shiki-light":"#998418"}},")"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"))"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"thread_local"),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}}," int"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," value_tl "),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"="),i("span",{style:{"--shiki-dark":"#4C9A91","--shiki-light":"#2F798A"}}," 0"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"int"),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}}," getValueTL"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"(){")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"  return"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," value_tl"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"}")])])],-1)])),_:1},16)]),right:t(d=>[e(l,k({},{ranges:[]}),{default:t(()=>a[1]||(a[1]=[i("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-asm"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"getValueTL():")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"        mov"),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"     rax"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},", "),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"QWORD"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," PTR value_tl@gottpoff["),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"rip"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"        mov"),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"     eax"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},", "),i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"DWORD"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," PTR "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"fs"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},":["),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"rax"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"        ret")])])],-1)])),_:1},16)]),default:t(()=>[a[2]||(a[2]=i("h1",null,"Shared Object : performance workarounds",-1)),a[3]||(a[3]=i("h3",null,"WA-3. glibc reserves about 1KB inside thread data.",-1)),a[4]||(a[4]=i("p",null,[s("Itâ€™s possible to mark a performance critical variable "),i("code",null,"'initial-exec'"),s("."),i("br"),i("code",null,"glibc"),s(" will add it to the main thread data. It works with glibc only (musl does not support this trick).")],-1))]),_:1},16)}}};export{x as default};
