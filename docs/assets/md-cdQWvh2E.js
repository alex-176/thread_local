import{_ as D}from"./slidev/VSwitch-BllnCmJO.js";import{_ as g,I as o}from"./slidev/two-cols-header-nGZfANre.js";import{b as y,o as c,w as l,g as i,e as t,B as s,m as k,v as C,x as u,C as n}from"./modules/vue-CN_MgJgD.js";import{u as E,f as A}from"./slidev/context-CSRnI4z7.js";import"./modules/shiki-CbJNJzfY.js";import"./index-D7hQM0az.js";import"./modules/unplugin-icons-CK6QWdxd.js";const w={__name:"thread_local.md__slidev_10",setup(m){const{$clicksContext:e,$frontmatter:r}=E();return e.setup(),(F,a)=>{const h=g,d=D;return c(),y(o,C(u(n(A)(n(r),9))),{left:l(p=>[t(h,k({},{ranges:[]}),{default:l(()=>a[0]||(a[0]=[i("pre",{class:"shiki shiki-themes dark-plus light-plus slidev-code",style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000","--shiki-dark-bg":"#1E1E1E","--shiki-light-bg":"#FFFFFF"}},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"#include"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}}," <thread>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"#include"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}}," <iostream>")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"#include"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}}," <unistd.h>")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"struct"),i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}}," ThreadLogger"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"    ThreadLogger"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"()  { "),i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::cout << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"CTOR tid: "'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," << "),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"gettid"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"() << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D7BA7D","--shiki-light":"#EE0000"}},"\\n"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"; }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"    ~ThreadLogger"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"() { "),i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::cout << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"DTOR tid: "'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," << "),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"gettid"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"() << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D7BA7D","--shiki-light":"#EE0000"}},"\\n"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"; }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"};")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"thread_local"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," ThreadLogger threadLogger;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"int"),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}}," main"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"(){")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"    std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::thread "),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"t"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"([](){")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"        std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::cout << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"thread'),i("span",{style:{"--shiki-dark":"#D7BA7D","--shiki-light":"#EE0000"}},"\\n"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"    });")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#9CDCFE","--shiki-light":"#001080"}},"    t"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"."),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}},"join"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"();")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"    std"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"::cout << "),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"main'),i("span",{style:{"--shiki-dark":"#D7BA7D","--shiki-light":"#EE0000"}},"\\n"),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"    return"),i("span",{style:{"--shiki-dark":"#B5CEA8","--shiki-light":"#098658"}}," 0"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"}")])])],-1)])),_:1},16)]),right:l(p=>[t(d,null,{0:l(()=>[a[2]||(a[2]=s(" The following output is expected: ")),t(h,k({},{ranges:[]}),{default:l(()=>a[1]||(a[1]=[i("pre",{class:"shiki shiki-themes dark-plus light-plus slidev-code",style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000","--shiki-dark-bg":"#1E1E1E","--shiki-light-bg":"#FFFFFF"}},[i("code",{class:"language-console"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"CTOR tid: 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"CTOR tid: 2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"thread")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"DTOR tid: 2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"main")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"DTOR tid: 1")])])],-1)])),_:1},16)]),1:l(()=>[a[4]||(a[4]=s(" The real output (gcc/clang): ")),t(h,k({},{ranges:[]}),{default:l(()=>a[3]||(a[3]=[i("pre",{class:"shiki shiki-themes dark-plus light-plus slidev-code",style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000","--shiki-dark-bg":"#1E1E1E","--shiki-light-bg":"#FFFFFF"}},[i("code",{class:"language-console"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"thread")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"main")])])],-1)])),_:1},16),a[5]||(a[5]=i("p",null,[s("Why no "),i("code",null,"thread_local"),s(" variable was constructed?")],-1)),a[6]||(a[6]=i("p",null,[s("A "),i("code",null,"thread_local"),s(" variable is constructed before the first time a thread accesses it.")],-1)),a[7]||(a[7]=i("p",null,[s("If a thread never accesses a "),i("code",null,"thread_local"),s(" variable, it might never be constructed for that thread.")],-1))]),_:1})]),default:l(()=>[a[8]||(a[8]=i("h1",null,"Class lifetime : Construction",-1)),a[9]||(a[9]=i("h4",null,"Assume we want to print thread_id for each thread at its construction and destruction.",-1))]),_:1},16)}}};export{w as default};
