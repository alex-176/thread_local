import{_ as D,I as d}from"./slidev/two-cols-header-nGZfANre.js";import{b as o,o as g,w as t,g as i,B as s,e,m as k,v as y,x as u,C as h}from"./modules/vue-CN_MgJgD.js";import{u as c,f as F}from"./slidev/context-CSRnI4z7.js";import"./modules/unplugin-icons-CK6QWdxd.js";import"./index-D7hQM0az.js";import"./modules/shiki-CbJNJzfY.js";const B={__name:"thread_local.md__slidev_18",setup(m){const{$clicksContext:r,$frontmatter:n}=c();return r.setup(),(C,a)=>{const l=D;return g(),o(d,y(u(h(F)(h(n),17))),{left:t(p=>[e(l,k({},{ranges:[]}),{default:t(()=>a[0]||(a[0]=[i("pre",{class:"shiki shiki-themes dark-plus light-plus slidev-code",style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000","--shiki-dark-bg":"#1E1E1E","--shiki-light-bg":"#FFFFFF"}},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"__attribute(("),i("span",{style:{"--shiki-dark":"#4EC9B0","--shiki-light":"#267F99"}},"tls_model"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"("),i("span",{style:{"--shiki-dark":"#CE9178","--shiki-light":"#A31515"}},'"initial-exec"'),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"))) ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"thread_local"),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}}," int"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," value_tl = "),i("span",{style:{"--shiki-dark":"#B5CEA8","--shiki-light":"#098658"}},"0"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"int"),i("span",{style:{"--shiki-dark":"#DCDCAA","--shiki-light":"#795E26"}}," getValueTL"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"(){")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#C586C0","--shiki-light":"#AF00DB"}},"  return"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," value_tl;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"}")])])],-1)])),_:1},16)]),right:t(p=>[e(l,k({},{ranges:[]}),{default:t(()=>a[1]||(a[1]=[i("pre",{class:"shiki shiki-themes dark-plus light-plus slidev-code",style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000","--shiki-dark-bg":"#1E1E1E","--shiki-light-bg":"#FFFFFF"}},[i("code",{class:"language-asm"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"getValueTL():")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"        mov     "),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"rax"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},", "),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"QWORD"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," PTR value_tl@gottpoff["),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"rip"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"        mov     "),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"eax"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},", "),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"DWORD"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}}," PTR "),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"fs"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},":["),i("span",{style:{"--shiki-dark":"#569CD6","--shiki-light":"#0000FF"}},"rax"),i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#D4D4D4","--shiki-light":"#000000"}},"        ret")])])],-1)])),_:1},16)]),default:t(()=>[a[2]||(a[2]=i("h1",null,"Shared Object : performance workarounds",-1)),a[3]||(a[3]=i("h3",null,"WA-3. glibc reserves about 1KB inside thread data.",-1)),a[4]||(a[4]=i("p",null,[s("Itâ€™s possible to mark a performance critical variable "),i("code",null,"'initial-exec'"),s("."),i("br"),i("code",null,"glibc"),s(" will add it to the main thread data. It works with glibc only (musl does not support this trick).")],-1))]),_:1},16)}}};export{B as default};
